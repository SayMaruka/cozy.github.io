<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <meta name="author" content="CozyCloud - https://cozy.io">
        <link rel="canonical" href="https://docs.cozy.io/cozy-stack/files/">
        <link rel="shortcut icon" href="../../img/favicon.png">
        
        <title>/files - Virtual File System - Dev Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
            <link href="../../css/extra.css" rel="stylesheet">
            <link href="../../css/highlight_theme.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://docs.cozy.io/">Dev Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../tutorials/app/">Create Your Application</a>
</li>
                            
<li >
    <a href="../../tutorials/konnector/">Develop a Connector</a>
</li>
                            
<li >
    <a href="../../tutorials/selfhost-debian/">Self-Host on Debian</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">How-to <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Dev</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../howTos/dev/runCozyDocker/">Run an App in a Cozy using Docker</a>
</li>
            
<li >
    <a href="../../howTos/dev/hmr/">Use Hot Module Replacement in Your App</a>
</li>
            
<li >
    <a href="../../howTos/dev/cordova/">Make a Mobile App Using Cordova</a>
</li>
            
<li >
    <a href="../../howTos/dev/connect-mobile-app-local-stack/">Connect a Mobile App to Your Local Stack</a>
</li>
            
<li >
    <a href="../../howTos/dev/sendmail/">Send and Receive E-mails in Development</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Synchronize</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../howTos/sync/linux/">Install Cozy Drive on GNU/Linux</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">References <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../references/tech-intro/">Technical introduction to the Cozy platform</a>
</li>
                            
<li >
    <a href="../../references/git-flow/">Our Front-End Git Flow</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Stack and tools</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">cozy-app-publish</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-app-publish/README/">CLI & Workflow</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-apps-registry</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-apps-registry/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-client</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-client/getting-started/">Getting started</a>
</li>
            
<li >
    <a href="../../cozy-client/how-tos/">How tos</a>
</li>
            
<li >
    <a href="../../cozy-client/api/cozy-client/">Cozy Client API</a>
</li>
            
<li >
    <a href="../../cozy-client/api/cozy-pouch-link/">Cozy Pouch Link API</a>
</li>
            
<li >
    <a href="../../cozy-client/api/cozy-stack-client/">Cozy Stack Client API</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-client-js</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-client-js/README/">README</a>
</li>
            
<li >
    <a href="../../cozy-client-js/intro/">Introduction</a>
</li>
            
<li >
    <a href="../../cozy-client-js/browser-sdk-transition/">Transition from cozy-browser-sdk</a>
</li>
            
<li >
    <a href="../../cozy-client-js/offline/">How to support offline</a>
</li>
            
<li >
    <a href="../../cozy-client-js/oauth/">OAuth guide</a>
</li>
            
<li >
    <a href="../../cozy-client-js/auth-api/">Authentication API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/data-api/">Data System API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/files-api/">Files API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/jobs-api/">Jobs API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/intents-api/">Intents API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/settings-api/">Settings API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/sharing-api/">Sharing API</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-ui</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-ui/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-doctypes</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-doctypes/docs/README/">README</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.accounts/">Accounts</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.photos.albums/">Albums</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.bank/">Banking doctypes</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.bills/">Bills</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.konnectors/">Connectors</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.contacts/">Contacts</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.files/">Files</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.notifications/">Notifications</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.remote.requests/">Remote requests</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.sessions.logins/">Session logins</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.sharings/">Sharings</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.triggers/">Triggers</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-konnector-libs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-konnector-libs/api/">API</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/cli/">CLI</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/dev/">Develop</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/errors/">Errors</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/operation-linking/">Operation linking</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/synchronization/">Synchronization</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-stack</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../README/">README</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Architecture</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../architecture/">General overview</a>
</li>
            
<li >
    <a href="../security/">Security</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Usage</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../INSTALL/">Install the cozy-stack</a>
</li>
            
<li >
    <a href="../cli/cozy-stack/">Manpages of the command-line tool</a>
</li>
            
<li >
    <a href="../config/">Configuration file</a>
</li>
            
<li >
    <a href="../instance/">Managing Instances</a>
</li>
            
<li >
    <a href="../onboarding/">Onboarding</a>
</li>
            
<li >
    <a href="../custom-context/">Context customization</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">For developpers</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../client-app-dev/">Develop a client-side app</a>
</li>
            
<li >
    <a href="../docker/">Running and building Docker images</a>
</li>
            
<li >
    <a href="../assets/">Working with the stacka assets</a>
</li>
            
<li >
    <a href="../release/">Build a release</a>
</li>
            
<li >
    <a href="../CONTRIBUTING/">The contributing guide</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Services</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../auth/">/auth - Authentication & OAuth</a>
</li>
            
<li >
    <a href="../apps/">/apps - Applications Management</a>
</li>
            
<li >
    <a href="../registry/"> /apps - Apps registry</a>
</li>
            
<li >
    <a href="../konnectors/"> /apps - Konnectors</a>
</li>
            
<li >
    <a href="../konnectors-workflow/"> /apps - Konnectors workflow</a>
</li>
            
<li >
    <a href="../data-system/">/data - Data System</a>
</li>
            
<li >
    <a href="../mango/"> /data - Mango</a>
</li>
            
<li >
    <a href="../replication/"> /data - Replication</a>
</li>
            
<li >
    <a href="../couchdb-quirks/"> /data - CouchDB Quirks</a>
</li>
            
<li >
    <a href="../pouchdb-quirks/"> /data - PouchDB Quirks</a>
</li>
            
<li class="active">
    <a href="./">/files - Virtual File System</a>
</li>
            
<li >
    <a href="../references-docs-in-vfs/"> /files - References of documents in VFS</a>
</li>
            
<li >
    <a href="../intents/">/intents - Intents</a>
</li>
            
<li >
    <a href="../jobs/">/jobs - Jobs</a>
</li>
            
<li >
    <a href="../workers/"> /jobs - Workers</a>
</li>
            
<li >
    <a href="../move/">/move - Move, export and import an instance</a>
</li>
            
<li >
    <a href="../notifications/">/notifications - Notifications</a>
</li>
            
<li >
    <a href="../public/">/public - Public</a>
</li>
            
<li >
    <a href="../permissions/">/permissions - Permissions</a>
</li>
            
<li >
    <a href="../realtime/">/realtime - Realtime</a>
</li>
            
<li >
    <a href="../remote/">/remote - Proxy for remote data/API</a>
</li>
            
<li >
    <a href="../settings/">/settings - Settings</a>
</li>
            
<li >
    <a href="../user-action-required/"> /settings - Terms of Services</a>
</li>
            
<li >
    <a href="../sharing/">/sharings - Sharing</a>
</li>
            
<li >
    <a href="../sharing-design/"> /sharings - Request for comments</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">konitor</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../konitor/cli/">CLI</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">babel-preset-cozy-app</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../babel-preset-cozy-app/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">commitlint-config-cozy</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../commitlint-config-cozy/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-device-helper</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-device-helper/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">eslint-config-cozy-app</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../eslint-config-cozy-app/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-flags</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-flags/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-realtime</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-realtime/README/">README</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li>
                        <a href="https://github.com/cozy/cozy.github.io/">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3 main-toc">
<div class="bs-sidebar hidden-print affix" role="complementary">
    <ul class="nav bs-sidenav well" style='padding-left: 0; padding-right: 0; margin-bottom: 1.5rem'>
        <li class="main active"><a href="#virtual-file-system">Virtual File System</a></li>
            <li><a href="#directories">Directories</a></li>
            <li><a href="#files">Files</a></li>
            <li><a href="#common">Common</a></li>
            <li><a href="#trash">Trash</a></li>
            <li><a href="#trashed-attribute">Trashed attribute</a></li>
    </ul>
  <div style='padding-left: 2rem'>
    
    <a id='edit-link' href='https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-stack/files.md'>Edit documentation</a>
    <script type='text/javascript'>
        /* Here we detect if the current page is from an external documentation and we 
        change the href of the editing link so it goes to the right repository and file */
        const outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-app-publish.git", "subdir": "."}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-client-js", "repo": "https://github.com/cozy/cozy-client-js.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/CPatchane/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "konitor", "repo": "https://github.com/konnectors/konitor.git", "subdir": "docs"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}]
        const editNode = document.querySelector('#edit-link')
        const pathname = window.location.pathname
        const editURI = 'edit/master/'
        const removeGitSuffix = function (x) { return x.replace(/\.git$/, '') }

        // Returns the external repo associated to a pathname
        const detectExternalRepo = function (pathname) {
            for (var outsideDoc of outsideDocs) {
                if (window.location.pathname.includes('/' + outsideDoc.name + '/')) {
                    return outsideDoc
                }
            }
        }

        // Change the href attribute of a link to point to the correct edition page on GitHub
        // for the passed external documentation
        const fixEditLink = function (editNode, externalDoc) {
            const repoFile = pathname.replace('/en/' + externalDoc.name, '').replace(/\/$/, '.md')
            const baseRepo = removeGitSuffix(externalDoc.repo)
            editNode.href = baseRepo + '/' + editURI + externalDoc.subdir + repoFile
        }

        const externalRepo = detectExternalRepo(pathname)
        if (externalRepo) {
            fixEditLink(editNode, externalRepo)
        }
    </script>
    
  </div>
</div></div>
                <div class="col-md-9" role="main">
                    

<p><a href="../README/#table-of-contents">Table of contents</a></p>
<h1 id="virtual-file-system">Virtual File System<a class="headerlink" href="#virtual-file-system" title="Permanent link">&para;</a></h1>
<p>Cozy applications can use files for storing binary content, like photos or bills
in PDF. This service offers a REST API to manipulate easily without having to
know the underlying storage layer. The metadata are kept in CouchDB, but the
binaries can go to the local system, or a Swift instance.</p>
<h2 id="directories">Directories<a class="headerlink" href="#directories" title="Permanent link">&para;</a></h2>
<p>A directory is a container for files and sub-directories.</p>
<p>Its path is the path of its parent, a slash (<code>/</code>), and its name. It&rsquo;s case
sensitive.</p>
<h3 id="root-directory">Root directory<a class="headerlink" href="#root-directory" title="Permanent link">&para;</a></h3>
<p>The root of the virtual file system is a special directory with id
<code>io.cozy.files.root-dir</code>.</p>
<p>You can use it in any request where you would use a directory, except you cannot
delete it.</p>
<h3 id="post-filesdir-id">POST /files/:dir-id<a class="headerlink" href="#post-filesdir-id" title="Permanent link">&para;</a></h3>
<p>Create a new directory. The <code>dir-id</code> parameter is optional. When it&rsquo;s not given,
the directory is created at the root of the virtual file system.</p>
<h4 id="query-string">Query-String<a class="headerlink" href="#query-string" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>directory</code></td>
</tr>
<tr>
<td>Name</td>
<td>the directory name</td>
</tr>
<tr>
<td>Tags</td>
<td>an array of tags</td>
</tr>
</tbody>
</table>
<h4 id="http-headers">HTTP headers<a class="headerlink" href="#http-headers" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Date</td>
<td>The modification date of the directory</td>
</tr>
</tbody>
</table>
<h4 id="request">Request<a class="headerlink" href="#request" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81?Type=directory&amp;Name=phone&amp;Tags=bills,konnectors</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 19 Sep 2016 12:35:08 GMT</span>
</pre></div>


<h4 id="status-codes">Status codes<a class="headerlink" href="#status-codes" title="Permanent link">&para;</a></h4>
<ul>
<li>201 Created, when the directory has been successfully created</li>
<li>404 Not Found, when the parent directory does not exist</li>
<li>409 Conflict, when a directory with the same name already exists</li>
<li>413 Payload Too Large, when there is not enough available space on the cozy
    to upload the file</li>
<li>422 Unprocessable Entity, when the <code>Type</code> or <code>Name</code> parameter is missing or
    invalid</li>
</ul>
<h4 id="response">Response<a class="headerlink" href="#response" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://cozy.example.com/files/6494e0ac-dfcb-11e5-88c1-472e84a9cbee</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span><span class="p">,</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-ff3beeb456eb&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Documents/phone&quot;</span><span class="p">,</span>
            <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bills&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="get-filesfile-id">GET /files/:file-id<a class="headerlink" href="#get-filesfile-id" title="Permanent link">&para;</a></h3>
<p>Get a directory or a file informations. In the case of a directory, it contains
the list of files and sub-directories inside it.</p>
<p>Contents is paginated following <a href="../jsonapi/#pagination">jsonapi conventions</a>.
The default limit is 30 entries.</p>
<h4 id="request_1">Request<a class="headerlink" href="#request_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<h4 id="response_1">Response<a class="headerlink" href="#response_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;next&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81?page[cursor]=9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span><span class="p">,</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-e36ab092&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Documents&quot;</span><span class="p">,</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Documents&quot;</span><span class="p">,</span>
            <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:00Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:00Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">},</span>
        <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;contents&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;included&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span><span class="p">,</span>
            <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-ff3beeb456eb&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
                <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Documents/phone&quot;</span><span class="p">,</span>
                <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bills&quot;</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
            <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hello.txt&quot;</span><span class="p">,</span>
                <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
                <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
                <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
                <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="delete-filesdir-id">DELETE /files/:dir-id<a class="headerlink" href="#delete-filesdir-id" title="Permanent link">&para;</a></h3>
<p>Put a directory and its subtree in the trash.</p>
<h4 id="http-headers_1">HTTP headers<a class="headerlink" href="#http-headers_1" title="Permanent link">&para;</a></h4>
<p>It&rsquo;s possible to send the <code>If-Match</code> header, with the previous revision of the
file/directory (optional).</p>
<h2 id="files">Files<a class="headerlink" href="#files" title="Permanent link">&para;</a></h2>
<p>A file is a binary content with some metadata.</p>
<h3 id="post-filesdir-id_1">POST /files/:dir-id<a class="headerlink" href="#post-filesdir-id_1" title="Permanent link">&para;</a></h3>
<p>Upload a file</p>
<h4 id="query-string_1">Query-String<a class="headerlink" href="#query-string_1" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>file</code></td>
</tr>
<tr>
<td>Name</td>
<td>the file name</td>
</tr>
<tr>
<td>Tags</td>
<td>an array of tags</td>
</tr>
<tr>
<td>Executable</td>
<td><code>true</code> if the file is executable (UNIX permission)</td>
</tr>
</tbody>
</table>
<h4 id="http-headers_2">HTTP headers<a class="headerlink" href="#http-headers_2" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content-Length</td>
<td>The file size</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>A Base64-encoded binary MD5 sum of the file</td>
</tr>
<tr>
<td>Content-Type</td>
<td>The mime-type of the file</td>
</tr>
<tr>
<td>Date</td>
<td>The modification date of the file</td>
</tr>
</tbody>
</table>
<h4 id="request_2">Request<a class="headerlink" href="#request_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81?Type=file&amp;Name=hello.txt</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12</span>
<span class="na">Content-MD5</span><span class="o">:</span> <span class="l">hvsmnRkNLIX24EaM7KQqIA==</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 19 Sep 2016 12:38:04 GMT</span>

Hello world!
</pre></div>


<h4 id="status-codes_1">Status codes<a class="headerlink" href="#status-codes_1" title="Permanent link">&para;</a></h4>
<ul>
<li>201 Created, when the file has been successfully created</li>
<li>404 Not Found, when the parent directory does not exist</li>
<li>409 Conflict, when a file with the same name already exists</li>
<li>412 Precondition Failed, when the md5sum is <code>Content-MD5</code> is not equal to
    the md5sum computed by the server</li>
<li>422 Unprocessable Entity, when the sent data is invalid (for example, the
    parent doesn&rsquo;t exist, <code>Type</code> or <code>Name</code> parameter is missing or invalid,
    etc.)</li>
</ul>
<h4 id="response_2">Response<a class="headerlink" href="#response_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://cozy.example.com/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;sunset.jpg&quot;</span><span class="p">,</span>
            <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
            <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-18T20:38:04Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">1080</span><span class="p">,</span>
                <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">1920</span>
            <span class="p">},</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
            <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;image/jpg&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;referenced_by&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81/relationships/references&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.albums&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;94375086-e2e2-11e6-81b9-5bc0b9dd4aa4&quot;</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
            <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/0f9cda56674282ac/small&quot;</span><span class="p">,</span>
            <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/0f9cda56674282ac/medium&quot;</span><span class="p">,</span>
            <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/0f9cda56674282ac/large&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><strong>Note</strong>: see <a href="../references-docs-in-vfs/">references of documents in VFS</a> for
more informations about the references field.</p>
<h3 id="get-filesdownloadfile-id">GET /files/download/:file-id<a class="headerlink" href="#get-filesdownloadfile-id" title="Permanent link">&para;</a></h3>
<p>Download the file content.</p>
<p>By default the <code>content-disposition</code> will be <code>inline</code>, but it will be
<code>attachment</code> if the query string contains the parameter <code>Dl=1</code></p>
<h4 id="request_3">Request<a class="headerlink" href="#request_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/download/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h4 id="response_3">Response<a class="headerlink" href="#response_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12</span>
<span class="na">Content-Disposition</span><span class="o">:</span> <span class="l">inline; filename=&quot;hello.txt&quot;</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

Hello world!
</pre></div>


<h3 id="get-filesdownload">GET /files/download<a class="headerlink" href="#get-filesdownload" title="Permanent link">&para;</a></h3>
<p>Download the file content from its path.</p>
<p>By default the <code>content-disposition</code> will be <code>inline</code>, but it will be
<code>attachment</code> if the query string contains the parameter <code>Dl=1</code></p>
<h4 id="request_4">Request<a class="headerlink" href="#request_4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/download?Path=/Documents/hello.txt&amp;Dl=1</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h3 id="get-filesfile-idthumbnailssecretformat">GET /files/:file-id/thumbnails/:secret/:format<a class="headerlink" href="#get-filesfile-idthumbnailssecretformat" title="Permanent link">&para;</a></h3>
<p>Get a thumbnail of a file (for an image only). <code>:format</code> can be <code>small</code>
(640x480), <code>medium</code> (1280x720), or <code>large</code> (1920x1080).</p>
<h3 id="put-filesfile-id">PUT /files/:file-id<a class="headerlink" href="#put-filesfile-id" title="Permanent link">&para;</a></h3>
<p>Overwrite a file</p>
<h4 id="http-headers_3">HTTP headers<a class="headerlink" href="#http-headers_3" title="Permanent link">&para;</a></h4>
<p>The HTTP headers are the same than for uploading a file. There is one additional
header, <code>If-Match</code>, with the previous revision of the file (optional).</p>
<h4 id="request_5">Request<a class="headerlink" href="#request_5" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12</span>
<span class="na">Content-MD5</span><span class="o">:</span> <span class="l">hvsmnRkNLIX24EaM7KQqIA==</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 20 Sep 2016 16:43:12 GMT</span>
<span class="na">If-Match</span><span class="o">:</span> <span class="l">1-0e6d5b72</span>

HELLO WORLD!
</pre></div>


<h4 id="status-codes_2">Status codes<a class="headerlink" href="#status-codes_2" title="Permanent link">&para;</a></h4>
<ul>
<li>200 OK, when the file has been successfully overwritten</li>
<li>404 Not Found, when the file wasn&rsquo;t existing</li>
<li>412 Precondition Failed, when the <code>If-Match</code> header is set and doesn&rsquo;t match
    the last revision of the file</li>
</ul>
<h4 id="response_4">Response<a class="headerlink" href="#response_4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-d903b54c&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hello.txt&quot;</span><span class="p">,</span>
            <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;YjU5YmMzN2Q2NDQxZDk2Nwo=&quot;</span><span class="p">,</span>
            <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
            <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="delete-filesfile-id">DELETE /files/:file-id<a class="headerlink" href="#delete-filesfile-id" title="Permanent link">&para;</a></h3>
<p>Put a file in the trash.</p>
<h2 id="common">Common<a class="headerlink" href="#common" title="Permanent link">&para;</a></h2>
<h3 id="get-filesmetadata">GET /files/metadata<a class="headerlink" href="#get-filesmetadata" title="Permanent link">&para;</a></h3>
<p>Same as <code>/files/:file-id</code> but to retrieve informations from a path.</p>
<h4 id="request_6">Request<a class="headerlink" href="#request_6" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/metadata?Path=/Documents/hello.txt</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h4 id="response_5">Response<a class="headerlink" href="#response_5" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://cozy.example.com/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hello.txt&quot;</span><span class="p">,</span>
            <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
            <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
            <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="patch-filesfile-id-and-patch-filesmetadata">PATCH /files/:file-id and PATCH /files/metadata<a class="headerlink" href="#patch-filesfile-id-and-patch-filesmetadata" title="Permanent link">&para;</a></h3>
<p>Both endpoints can be used to update the metadata of a file or directory, or to
rename/move it. The difference is the first one uses an id to identify the
file/directory to update, and the second one uses the path.</p>
<p>Some specific attributes of the patch can be used:</p>
<ul>
<li><code>dir_id</code> attribute can be updated to move a file or directory</li>
<li><code>move_to_trash</code> boolean to specify that the file needs to be moved to the
    trash</li>
<li><code>permanent_delete</code> boolean to specify that the files needs to be deleted
    (after being trashed)</li>
</ul>
<h4 id="http-headers_4">HTTP headers<a class="headerlink" href="#http-headers_4" title="Permanent link">&para;</a></h4>
<p>It&rsquo;s possible to send the <code>If-Match</code> header, with the previous revision of the
file/directory (optional).</p>
<h4 id="request_7">Request<a class="headerlink" href="#request_7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hi.txt&quot;</span><span class="p">,</span>
            <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span><span class="p">,</span>
            <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;poem&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="status-codes_3">Status codes<a class="headerlink" href="#status-codes_3" title="Permanent link">&para;</a></h4>
<ul>
<li>200 OK, when the file or directory metadata has been successfully updated</li>
<li>400 Bad Request, when a the directory is asked to move to one of its
    sub-directories</li>
<li>404 Not Found, when the file/directory wasn&rsquo;t existing</li>
<li>412 Precondition Failed, when the <code>If-Match</code> header is set and doesn&rsquo;t match
    the last revision of the file/directory</li>
<li>422 Unprocessable Entity, when the sent data is invalid (for example, the
    parent doesn&rsquo;t exist)</li>
</ul>
<h4 id="response_6">Response<a class="headerlink" href="#response_6" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://cozy.example.com/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hi.txt&quot;</span><span class="p">,</span>
            <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
            <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;poem&quot;</span><span class="p">],</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
            <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="patch-files">PATCH /files/<a class="headerlink" href="#patch-files" title="Permanent link">&para;</a></h3>
<p>Endpoint to update the metadata of files and directories in batch. It can be
used, for instance, to move many files in a single request.</p>
<h4 id="request_8">Request<a class="headerlink" href="#request_8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="err">PATCH /files/</span>
<span class="err">Content-Type: application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
            <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span> <span class="p">},</span>
            <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span> <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4c&quot;</span><span class="p">,</span>
            <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-123123&quot;</span> <span class="p">},</span>
            <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;move_to_trash&quot;</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h4 id="status-codes_4">Status codes<a class="headerlink" href="#status-codes_4" title="Permanent link">&para;</a></h4>
<p>The same status codes can be encountered as the <code>PATCH /files/:file-id</code> route.</p>
<h3 id="post-filesarchive">POST /files/archive<a class="headerlink" href="#post-filesarchive" title="Permanent link">&para;</a></h3>
<p>Create an archive. The body of the request lists the files and directories that
will be included in the archive. For directories, it includes all the files and
sub-directories in the archive.</p>
<p>It&rsquo;s possible to give a file by its id (in the <code>ids</code> array) or by its path (in
the <code>files</code> array).</p>
<h4 id="request_9">Request<a class="headerlink" href="#request_9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/archive</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/zip</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.archives&quot;</span><span class="p">,</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;project-X&quot;</span><span class="p">,</span>
            <span class="nt">&quot;ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a51aeeea-4f79-11e7-9dc4-83f67e9494ab&quot;</span><span class="p">],</span>
            <span class="nt">&quot;files&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;/Documents/bills&quot;</span><span class="p">,</span>
                <span class="s2">&quot;/Documents/images/sunset.jpg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;/Documents/images/eiffel-tower.jpg&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="response_7">Response<a class="headerlink" href="#response_7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/archive/4521DC87/project-X.zip&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.archives&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4521DC87&quot;</span><span class="p">,</span>
        <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/archive/4521DC87/project-X.zip&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="get-filesarchivekeyname">GET /files/archive/:key/:name<a class="headerlink" href="#get-filesarchivekeyname" title="Permanent link">&para;</a></h3>
<p>Download a previously created archive. The name parameter is not used in the
stack but aims to allow setting a name even for browser / downloader that do not
support Content-Disposition filename.</p>
<p><strong>This route does not require Basic Authentification</strong></p>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/archive/4521DC87/project-X.zip</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/zip</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12345</span>
<span class="na">Content-Disposition</span><span class="o">:</span> <span class="l">attachment; filename=&quot;project-X.zip&quot;</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/zip</span>
</pre></div>


<h3 id="post-filesdownloadspathfile_path">POST /files/downloads?Path=file_path<a class="headerlink" href="#post-filesdownloadspathfile_path" title="Permanent link">&para;</a></h3>
<p>Create a file download. The Path query parameter specifies the file to download.
The response json API links contains a <code>related</code> link for downloading the file,
see below.</p>
<h3 id="post-filesdownloadsidfile_id">POST /files/downloads?Id=file_id<a class="headerlink" href="#post-filesdownloadsidfile_id" title="Permanent link">&para;</a></h3>
<p>Also create a file download. But it takes the id of the file and not its path.</p>
<h3 id="get-filesdownloadssecretname">GET /files/downloads/:secret/:name<a class="headerlink" href="#get-filesdownloadssecretname" title="Permanent link">&para;</a></h3>
<p>Allows to download a file with a secret created from the route above.</p>
<p>The name parameter is not used in the stack but aims to allow setting a name
even for browser / downloader that do not support Content-Disposition filename.</p>
<p>By default the <code>content-disposition</code> will be <code>inline</code>, but it will be
<code>attachment</code> if the query string contains the parameter <code>Dl=1</code></p>
<p><strong>This route does not require Basic Authentification</strong></p>
<h2 id="trash">Trash<a class="headerlink" href="#trash" title="Permanent link">&para;</a></h2>
<p>When a file is deleted, it is first moved to the trash. In the trash, it can be
restored. Or, after some time, it will be removed from the trash and permanently
destroyed.</p>
<p>The file <code>trashed</code> attribute will be set to true.</p>
<h3 id="get-filestrash">GET /files/trash<a class="headerlink" href="#get-filestrash" title="Permanent link">&para;</a></h3>
<p>List the files inside the trash. It&rsquo;s paginated.</p>
<h3 id="query-string_2">Query-String<a class="headerlink" href="#query-string_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>page[cursor]</td>
<td>the last id of the results</td>
</tr>
<tr>
<td>page[limit]</td>
<td>the number of entries (30 by default)</td>
</tr>
</tbody>
</table>
<h4 id="request_10">Request<a class="headerlink" href="#request_10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/trash</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<h4 id="response_8">Response<a class="headerlink" href="#response_8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;df24aac0-7f3d-11e6-81c0-d38812bfa0a8&quot;</span><span class="p">,</span>
            <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-3b75377c&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.txt&quot;</span><span class="p">,</span>
                <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;YjAxMzQxZTc4MDNjODAwYwo=&quot;</span><span class="p">,</span>
                <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
                <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
                <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/trash/df24aac0-7f3d-11e6-81c0-d38812bfa0a8&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4a4fc582-7f3e-11e6-b9ca-278406b6ddd4&quot;</span><span class="p">,</span>
            <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-4a09030e&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bar.txt&quot;</span><span class="p">,</span>
                <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;YWVhYjg3ZWI0OWQzZjRlMAo=&quot;</span><span class="p">,</span>
                <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
                <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">456</span><span class="p">,</span>
                <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
                <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/trash/4a4fc582-7f3e-11e6-b9ca-278406b6ddd4&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="post-filestrashfile-id">POST /files/trash/:file-id<a class="headerlink" href="#post-filestrashfile-id" title="Permanent link">&para;</a></h3>
<p>Restore the file with the <code>file-id</code> identifiant.</p>
<p>The file&rsquo;s <code>trashed</code> attributes will be set to false.</p>
<h3 id="delete-filestrashfile-id">DELETE /files/trash/:file-id<a class="headerlink" href="#delete-filestrashfile-id" title="Permanent link">&para;</a></h3>
<p>Destroy the file and make it unrecoverable (it will still be available in
backups).</p>
<h3 id="delete-filestrash">DELETE /files/trash<a class="headerlink" href="#delete-filestrash" title="Permanent link">&para;</a></h3>
<p>Clear out the trash.</p>
<h2 id="trashed-attribute">Trashed attribute<a class="headerlink" href="#trashed-attribute" title="Permanent link">&para;</a></h2>
<p>All files that are inside the trash will have a <code>trashed: true</code> attribute. This
attribute can be used in mango queries to only get &ldquo;interesting&rdquo; files.</p>
                </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <!-- Piwik -->
        <script type="text/javascript">
          var _paq = _paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (function() {
            var u="//matomo.cozycloud.cc/";
            _paq.push(['setTrackerUrl', u+'piwik.php']);
            _paq.push(['setSiteId', '7']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
          })();
        </script>
        <noscript><p><img src="//matomo.cozycloud.cc/piwik.php?idsite=7&rec=1" style="border:0;" alt="" /></p></noscript>
        <!-- End Piwik Code -->
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../extra.js"></script>
        <script src="../../search/main.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
